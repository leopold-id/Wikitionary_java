package projet_final;

import java.util.ArrayList;
import java.util.HashMap;

import org.apache.commons.cli.*;

public class test_parse {
	
	public static Options initOptions() {

	    Option mot = Option.builder("m") 
	            .longOpt("mot") //
	            .desc("mot") 
	            .hasArg(true) 
	            .required(false) 
	            .build();

	    Option information = Option.builder("i") 
	            .longOpt("information") 
	            .desc("information") 
	            .hasArg(true) 
	            .required(true) 
	            .build();


	    Options arguments = new Options();

	    arguments.addOption(mot);
	    arguments.addOption(information);

	    return arguments;
	}
	
	
	public static void main (String[] args) throws ParseException {
		
		// A cet endroit là il faut récupérer la HashMap sérialisée
		HashMap<String,Lamentin> extract = new HashMap<>();
		
		// Initialisation du parser et des requetes possibles 
		Options options = initOptions();
		
		CommandLineParser parser = new DefaultParser();
		CommandLine cmd = parser.parse(options, args);

		ArrayList<String> requetesPossibles = new ArrayList<>();
		requetesPossibles.add("prononciations");
		requetesPossibles.add("categories_morposyntaxiques");
		requetesPossibles.add("traductions");
		requetesPossibles.add("synonymes");
		requetesPossibles.add("antonymes");
		
		// Parsing des arguments donnés en ligne de commande 
		String mot = cmd.getOptionValue("m");
		String requete = cmd.getOptionValue("i");
		
		// Vérification que le mot est dans le dictionnaire 
		if (!extract.containsKey(mot)) {
			System.out.println("Le mot demandé n'est pas dans le dictionnaire");
		} else {
			// Vérification que la requête est une requete possible 
			if (!requetesPossibles.contains(requete)) {
				System.out.println("veuillez saisir une requête parmi celles suivantes : ");
				System.out.println(requetesPossibles);
			} else {
				// Récupération de l'information requise
				if (requete == "prononciations") {
					System.out.println(extract.get(mot).prononciations);
				} else if (requete == "categories_morposyntaxiques") {
					System.out.println(extract.get(mot).categories_morposyntaxiques);
				} else if (requete == "traductions") {
					System.out.println(extract.get(mot).traductions);
				} else if (requete == "synonymes") {
					System.out.println(extract.get(mot).synonymes);
				} else {
					System.out.println(extract.get(mot).antonymes);
				}	
			}
		}
	}	
}
