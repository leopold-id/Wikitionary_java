package projet_final;

import java.util.ArrayList;
import java.util.HashMap;

import org.apache.commons.cli.*;

public class test_parse {
	
	public static Options initOptions() {

	    Option mot = Option.builder("m") 
	            .longOpt("mot") //
	            .desc("mot") 
	            .hasArg(true) 
	            .required(false) 
	            .build();

	    Option information = Option.builder("i") 
	            .longOpt("information") 
	            .desc("information") 
	            .hasArg(true) 
	            .required(true) 
	            .build();


	    Options arguments = new Options();

	    arguments.addOption(mot);
	    arguments.addOption(information);

	    return arguments;
	}
	
	
	public static void main (String[] args) throws ParseException {
		
		// A cet endroit là il faut récupérer la HashMap sérialisée
		HashMap<String,Lamentin> extract = new HashMap<>();
		
		// Initialisation du parser et des requetes possibles 
		Options options = initOptions();
		
		CommandLineParser parser = new DefaultParser();
		CommandLine cmd = parser.parse(options, args);
		
		// Parsing des arguments donnés en ligne de commande 
		String mot_demande = cmd.getOptionValue("m");
		String requete = cmd.getOptionValue("i");
		
		// Vérification que le mot est dans le dictionnaire 
		if (!extract.containsKey(mot_demande)) {
			System.out.println("Le mot demandé n'est pas dans le dictionnaire");
		} else {
			if (requete = "all") {
				System.out.println(extract.get(mot_demande).introspection());
			} else {
				System.out.println(extract.get(mot_demande).select(requete));
			}
		}
	}	
}
